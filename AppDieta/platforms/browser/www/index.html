<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">

		<!-- The core Firebase JS SDK is always required and must be listed first -->
		<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
		<script defer src="https://www.gstatic.com/firebasejs/6.2.0/firebase-auth.js"></script>
		<script defer src="https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js"></script>
		<!-- TODO: Add SDKs for Firebase products that you want to use
		     https://firebase.google.com/docs/web/setup#available-libraries -->

		<script>
		  // Your web app's Firebase configuration
		  var firebaseConfig = {
		    apiKey: "AIzaSyD_mwMSSpi0zPQMPp6Hblg_puejiQjyUK8",
		    authDomain: "metasalimenticias.firebaseapp.com",
		    databaseURL: "https://metasalimenticias.firebaseio.com",
		    projectId: "metasalimenticias",
		    storageBucket: "metasalimenticias.appspot.com",
		    messagingSenderId: "934058171716",
		    appId: "1:934058171716:web:fae77b934754b8db374b11"
		  };
		  // Initialize Firebase
		  firebase.initializeApp(firebaseConfig);
		</script>
		
        
        <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
 	    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
  	    <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>

        <title>DietApp</title>
    </head>

	<script type="text/javascript">
		function signIn(){
			const email = document.getElementById("correo").value;
			const password = document.getElementById("pass").value;
			if(email == "" || password == ""){
				ons.notification.alert("Error : Data Needed");
			}
			else{
				const auth = firebase.auth();

				const promise = auth.createUserWithEmailAndPassword(email, password);
				if(promise.error == ""){
					ons.notification.toast("Usuario registrado con exito", {timeout: 2000});
				}
				promise.catch( e => ons.notification.alert("Error : " + e.message));
			}
		}

		function revisa(){
			firebase.auth().onAuthStateChanged(firebaseUser =>{
					if (firebaseUser) {
						console.log(firebaseUser);
						ons.notification.alert("Usuario dentro");
					}
					else{
						console.log('No esta dentro');
					}
				});
		}

		function logIn(){
			const email = document.getElementById("correo").value;
			const password = document.getElementById("pass").value;
			if(email == "" || password == ""){
				ons.notification.alert("Error : Data Needed");
			}
			else{
				const auth = firebase.auth();

				const promise = auth.signInWithEmailAndPassword(email, password);
				promise.catch( e => ons.notification.alert("Error : " + e.message));
			}
		}
	</script>



    <body>
    	<ons-navigator swipeable id="myNavigador" page="login.html"></ons-navigator>
    	<template id="login.html">
    	<ons-page id="login"> 
			<center>
				<h1>METACU</h1>
				<br>
				<br>
				<img src="https://encuentratubeca.mx/wp-content/uploads/2019/04/logoudgvectores_1_origsdaasss.png" height="140" width="225">
				<br>
				<br>
        <ons-input placeholder="Ingrese el correo" input-id="correo" modifier="underbar" type="email"></ons-input>
				<br>
				<br>
        <ons-input placeholder="Ingrese la contraseña" input-id="pass" modifier="underbar" type="password"></ons-input>
				<br>
				<br>
			    <ons-button id="push-button" onclick="signIn()" style="background-color: #FFA101; color: black" >Registrarse</ons-button>
			    <ons-button id="push-button-F" onclick="logIn()" style="background-color: #FFA101; color: black" >Iniciar Seción</ons-button>
			</center>
    	</ons-page>
		</template>
        <script type="text/javascript" src="cordova.js"></script>
    </body>
</html>
